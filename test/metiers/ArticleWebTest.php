<?php
/**
 * Generated by PHPUnit_SkeletonGenerator on 2015-12-14 at 16:52:36.
 */
require '/../../metiers/ArticleWeb.php';
class ArticleWebTest extends PHPUnit_Framework_TestCase
{
    /**
     * @var ArticleWeb
     */
    private $article;


    /**
     * @before
     */
    public function setUp()
    {
        $tabMotClefs = array("maladie"=>null,"symptome"=>array("abortion","high fever","loss of appetite"),"hote"=>array("cattle","cows"));
        $this->article = new ArticleWeb("089ebd5bb4","Cattle farmers should watch for blood disease - Agri News","http://news.google.com/news/url?sa=t&fd=R&ct2=us&usg=AFQjCNHoKDd53HWrRCVbzL_eYJO0dOIOiA&clid=c3a7d30bb8a4878e06b80cf16b898331&cid=52778997077762&ei=1YRUVvi3CoypatamlZgP&url=http://agrinews-pubs.com/Content/Auction-Calendar/Livestock/Article/Cattle-farmers-should-watch-for-blood-disease-/15/7/13647",
                                    "Agri News","Cattle farmers should watch for blood disease\n\n\nWEST LAFAYETTE, Ind. - Beef and dairy producers in Indiana should watch their herds carefully\nfor signs of the blood disease anaplasmosis, a Purdue animal health specialist\nsaid.\nThe disease causes severe and potentially fatal anemia in\ncattle, but poses no threat to humans.\n\"If you have, or suspect anaplasmosis, work closely with your\nherd veterinarian to develop effective treatment and control programs,\" said\nBethany Funnell, clinical assistant professor of veterinary medicine. \"Death of\nan adult is often the first sign noticed in a herd infection.\"\nThe disease is caused by the parasites Anaplasma marginale\nand Anaplasma centrale. Tetracycline is the most common treatment. \nSymptoms in cattle include weight loss, loss of appetite,\nhigh fever, dehydration, constipation, pale mucous membranes inside eyelid and\nvulva, jaundice, abortion in pregnant cows and aggressive behavior. The disease\nis more common among middle-aged animals, with most fatal cases occurring\nbetween 6 and 8 years old.\nAnaplasmosis in cattle is spread by parasites such as biting\nflies and wood ticks. Wet weather in the spring may have created ideal breeding\nconditions for the insects that carry the disease.\nHerds also may become infected by de-horning, ear-tagging,\ncastration, injection and other equipment that has not been disinfected between\nuses on different cows.\n\"Data shows that a syringe used on an infected cow could\ninfect six out of the next 10 animals injected using the same syringe,\" said\nRon Lemenager, a Purdue Extension beef specialist.\nThe disease is found in both beef and dairy herds but is less\ncommon in dairy herds.\nEarly treatment of the disease is key to keeping cattle\nalive. Funnell recommends that producers in high and moderate infection areas\nconsider vaccinating young cattle against anaplasmosis because symptoms are\noften not seen in cattle younger than a year old.\nShe said clearing infection requires long-term antibiotic\ntherapy, and producers should consult their herd veterinarians to decide on an\nappropriate course.\nTime from exposure to clinical signs of anaplasmosis in\ncattle is three to six weeks, and some cattle may become asymptomatic carriers,\nmeaning they could carry the disease without showing any signs of it.\nAsymptomatic - or \"carrier\" - animals are less vulnerable to\na full-blown infection, so producers might want to consider exposing all of\ntheir cattle if the infection rate in the area is high, in effect vaccinating\nthe animals against a serious infection. \nIf the infection rate in a region is moderate to low - Indiana is considered\nlow - it could be possible to clear the infection from a herd without exposing\nthe animals.\nIn areas where infection is high, Funnell said producers\nshould consult with their veterinarians as soon as possible to plan an\nappropriate course of action.\nShe noted that transporting cattle carrying anaplasmosis\nmight be difficult because some state animal regulations may require a negative\ntest for the infection before transport. To find out if an area is highly\ninfected, she suggests producers consult local food animal veterinarians and\nregional Extension educators.\nLemenager said that handling animals infected with\nanaplasmosis could present challenges because of their weakened systems.\n\"If you\'re herding these cattle, you\'re going to need to\nbring them up easy, because they don\'t have enough oxygen, being anemic,\" he\nsaid. \"If they get too excited, these cows could die.\"\nFor more information on anaplasmosis in cattle, contact\nFunnell at 765-494-8548 or bfunnell@purdue.edu. \n#datearemp\n#coordtemp",
                                    "1448255277","1448379627");
        $this->article->setMots_cles($tabMotClefs);
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
    }

    /**
     * @covers ArticleWeb::__construct($id, $titre, $url, $source, $contenu, $datePublication, $dateAspiration)
     * @todo   Implement test__construct().
     */    
    public function test__construct()
    {
        $article2 = new ArticleWeb("089ebd5bb4","Cattle farmers should watch for blood disease - Agri News","http://news.google.com/news/url?sa=t&fd=R&ct2=us&usg=AFQjCNHoKDd53HWrRCVbzL_eYJO0dOIOiA&clid=c3a7d30bb8a4878e06b80cf16b898331&cid=52778997077762&ei=1YRUVvi3CoypatamlZgP&url=http://agrinews-pubs.com/Content/Auction-Calendar/Livestock/Article/Cattle-farmers-should-watch-for-blood-disease-/15/7/13647",
                                    "Agri News","Cattle farmers should watch for blood disease\n\n\nWEST LAFAYETTE, Ind. - Beef and dairy producers in Indiana should watch their herds carefully\nfor signs of the blood disease anaplasmosis, a Purdue animal health specialist\nsaid.\nThe disease causes severe and potentially fatal anemia in\ncattle, but poses no threat to humans.\n\"If you have, or suspect anaplasmosis, work closely with your\nherd veterinarian to develop effective treatment and control programs,\" said\nBethany Funnell, clinical assistant professor of veterinary medicine. \"Death of\nan adult is often the first sign noticed in a herd infection.\"\nThe disease is caused by the parasites Anaplasma marginale\nand Anaplasma centrale. Tetracycline is the most common treatment. \nSymptoms in cattle include weight loss, loss of appetite,\nhigh fever, dehydration, constipation, pale mucous membranes inside eyelid and\nvulva, jaundice, abortion in pregnant cows and aggressive behavior. The disease\nis more common among middle-aged animals, with most fatal cases occurring\nbetween 6 and 8 years old.\nAnaplasmosis in cattle is spread by parasites such as biting\nflies and wood ticks. Wet weather in the spring may have created ideal breeding\nconditions for the insects that carry the disease.\nHerds also may become infected by de-horning, ear-tagging,\ncastration, injection and other equipment that has not been disinfected between\nuses on different cows.\n\"Data shows that a syringe used on an infected cow could\ninfect six out of the next 10 animals injected using the same syringe,\" said\nRon Lemenager, a Purdue Extension beef specialist.\nThe disease is found in both beef and dairy herds but is less\ncommon in dairy herds.\nEarly treatment of the disease is key to keeping cattle\nalive. Funnell recommends that producers in high and moderate infection areas\nconsider vaccinating young cattle against anaplasmosis because symptoms are\noften not seen in cattle younger than a year old.\nShe said clearing infection requires long-term antibiotic\ntherapy, and producers should consult their herd veterinarians to decide on an\nappropriate course.\nTime from exposure to clinical signs of anaplasmosis in\ncattle is three to six weeks, and some cattle may become asymptomatic carriers,\nmeaning they could carry the disease without showing any signs of it.\nAsymptomatic - or \"carrier\" - animals are less vulnerable to\na full-blown infection, so producers might want to consider exposing all of\ntheir cattle if the infection rate in the area is high, in effect vaccinating\nthe animals against a serious infection. \nIf the infection rate in a region is moderate to low - Indiana is considered\nlow - it could be possible to clear the infection from a herd without exposing\nthe animals.\nIn areas where infection is high, Funnell said producers\nshould consult with their veterinarians as soon as possible to plan an\nappropriate course of action.\nShe noted that transporting cattle carrying anaplasmosis\nmight be difficult because some state animal regulations may require a negative\ntest for the infection before transport. To find out if an area is highly\ninfected, she suggests producers consult local food animal veterinarians and\nregional Extension educators.\nLemenager said that handling animals infected with\nanaplasmosis could present challenges because of their weakened systems.\n\"If you\'re herding these cattle, you\'re going to need to\nbring them up easy, because they don\'t have enough oxygen, being anemic,\" he\nsaid. \"If they get too excited, these cows could die.\"\nFor more information on anaplasmosis in cattle, contact\nFunnell at 765-494-8548 or bfunnell@purdue.edu. \n#datearemp\n#coordtemp",
                                    "1448255277","1448379627");
        $this->assertEquals($article2->getId(),"089ebd5bb4");
    }
    
    
    /**
     * @covers ArticleWeb::getId
     * @todo   Implement testGetId().
     */
    public function testGetId()
    {
         $this->assertEquals($this->article->getId(),"089ebd5bb4");
    }

    /**
     * @covers ArticleWeb::getTitre
     * @todo   Implement testGetTitre().
     */
    public function testGetTitre()
    {
       $this->assertEquals($this->article->getTitre(),mb_convert_encoding(stripslashes("Cattle farmers should watch for blood disease - Agri News"),"UTF-8"));
    }

    /**
     * @covers ArticleWeb::getUrl
     * @todo   Implement testGetUrl().
     */
    public function testGetUrl()
    {
        $this->assertEquals($this->article->getUrl(),"http://news.google.com/news/url?sa=t&fd=R&ct2=us&usg=AFQjCNHoKDd53HWrRCVbzL_eYJO0dOIOiA&clid=c3a7d30bb8a4878e06b80cf16b898331&cid=52778997077762&ei=1YRUVvi3CoypatamlZgP&url=http://agrinews-pubs.com/Content/Auction-Calendar/Livestock/Article/Cattle-farmers-should-watch-for-blood-disease-/15/7/13647");
    }

    /**
     * @covers ArticleWeb::getSource
     * @todo   Implement testGetSource().
     */
    public function testGetSource()
    {
        $this->assertEquals($this->article->getSource(),mb_convert_encoding(stripslashes("Agri News"),"UTF-8"));
    }

    /**
     * @covers ArticleWeb::getContenu
     * @todo   Implement testGetContenu().
     */
    public function testGetContenu()
    {
        if(preg_match("#\\\\n|\\\r#", $this->article->getContenu())){
            $bool = FALSE;
        }
        else{
            $bool = TRUE;
        }
        $this->assertTrue($bool);  
    }

    /**
     * @covers ArticleWeb::getMots_cles
     * @todo   Implement testGetMots_cles().
     */
    public function testGetMots_cles()
    {
        $tabMotClefs = array("maladie"=>null,"symptome"=>array("abortion","high fever","loss of appetite"),"hote"=>array("cattle","cows"));
        $this->assertSame($this->article->getMots_cles(),$tabMotClefs);
        
    }

    /**
     * @covers ArticleWeb::donnerChaineMots_cles
     * @todo   Implement testDonnerChaineMots_cles().
     */
    public function testDonnerChaineMots_cles()
    {
        $chaineAttendu = "abortion - high fever - loss of appetite - cattle - cows";
        $this->assertEquals($this->article->donnerChaineMots_cles(),$chaineAttendu);
        //article trouvé avec seulement le mot clé de la maladie
        $tabMotClefs = array("maladie"=>array("Avian Flu"),"symptome"=>null,"hote"=>null);
        $this->article->setMots_cles($tabMotClefs);
        $chaineAttendu = "Avian Flu";
        $this->assertEquals($this->article->donnerChaineMots_cles(),$chaineAttendu);
        //article trouvé avec le mot-clé de la maladie et d'un symptome associé à un hôte
        $tabMotClefs = array("maladie"=>array("Avian Flu"),"symptome"=>array("high fever"),"hote"=>array("pigs"));
        $this->article->setMots_cles($tabMotClefs);
        $chaineAttendu = "Avian Flu - high fever - pigs";
        $this->assertEquals($this->article->donnerChaineMots_cles(),$chaineAttendu);        
        
    }   

    /**
     * @covers ArticleWeb::getDatePublication
     * @todo   Implement testGetDatePublication().
     */
    public function testGetDatePublication()
    {
        $this->assertEquals($this->article->getDatePublication(),date("d-m-Y H:i",1448255277));
    }

    /**
     * @covers ArticleWeb::getDateAspiration
     * @todo   Implement testGetDateAspiration().
     */
    public function testGetDateAspiration()
    {
        $this->assertEquals($this->article->getDateAspiration(),date("d-m-Y H:i",1448379627));
    }

    /**
     * @covers ArticleWeb::getResume
     * @todo   Implement testGetResume().
     */
    public function testGetResume()
    {
        $this->assertLessThan(strlen($this->article->getContenu()),  strlen($this->article->getResume()));
    }

    /**
     * @covers ArticleWeb::setTitre
     * @todo   Implement testSetTitre().
     */
    public function testSetTitre()
    {
        $this->article->setTitre("ceci est un test");
        $this->assertEquals($this->article->getTitre(),"ceci est un test");
    }

    /**
     * @covers ArticleWeb::setMots_cles
     * @todo   Implement testSetMots_cles().
     */
    public function testSetMots_cles()
    {
        $tabMotClefs = array("maladie"=>array("Avian Flu"),"symptome"=>array("high fever"),"hote"=>array("pigs"));
        $this->article->setMots_cles($tabMotClefs);    
        $this->assertEquals($this->article->getMots_cles(),$tabMotClefs);        
    }

    /**
     * @covers ArticleWeb::donnerResumePrecis
     * @todo   Implement testDonnerResumePrecis().
     */
    public function testDonnerResumePrecis()
    {
       $longueur = 32;
       $this->assertLessThanOrEqual(strlen($this->article->getContenu()),strlen($this->article->donnerResumePrecis($longueur)));
    }

    /**
     * @covers ArticleWeb::marquageExpressionTitre
     * @todo   Implement testMarquageExpressionTitre().
     */
    public function testMarquageExpressionTitre()
    {
        $oldTaille = strlen($this->article->getTitre());
        $this->article->marquageExpressionTitre("Cattle");
        $this->assertLessThanOrEqual(strlen($this->article->getTitre()),$oldTaille);
        //si pas l'expression n'est pas dans le titre
        $oldTaille = strlen($this->article->getTitre());
        $this->article->marquageExpressionTitre("dogs");
        $this->assertEquals(strlen($this->article->getTitre()),$oldTaille);
    }

    /**
     * @covers ArticleWeb::marquageExpressionResume
     * @todo   Implement testMarquageExpressionResume().
     */
    public function testMarquageExpressionResume()
    {
        $oldTaille = strlen($this->article->getResume());
        $this->article->marquageExpressionResume("Cattle");
        $this->assertLessThanOrEqual(strlen($this->article->getResume()),$oldTaille);
        //si pas l'expression n'est pas dans le titre
        $oldTaille = strlen($this->article->getResume());
        $this->article->marquageExpressionResume("dogs");
        $this->assertEquals(strlen($this->article->getResume()),$oldTaille);
    }

    /**
     * @covers ArticleWeb::marquageExpressionContenu
     * @todo   Implement testMarquageExpressionContenu().
     */
    public function testMarquageExpressionContenu()
    {
        $this->article->marquageExpressionContenu("farmers");
        
        if(preg_match("#mark#", $this->article->getContenu())){
            $bool = TRUE;
        }
        else{
            $bool = FALSE;
        }
        $this->assertTrue($bool);        
        
    }
}
